<form [formGroup]="form">
    <div class="formElement">
        <label for="title">Title:</label>
        <input type="text" name="title" id="title" formControlName="title">
    </div>
    <div class="formElement">
        <label for="description">Description:</label>
        <textarea type="text" name="description" id="description" formControlName="description"></textarea>
    </div>
    <div class="formElement">
        <label for="deadline">Deadline:</label>
        <input type="date" name="deadline" id="deadline" formControlName="deadline">
    </div>
    <div class="formElement">
        <app-form-drag-list></app-form-drag-list>
    </div>
</form>

<div class="infobox" *ngIf="currentTask$ | async as currentTask">
    <p>Time active: {{ currentTask.secondsActive | secondsToTimestring }}</p>
    <ul>
        <li *ngFor="let attachment of currentTask.attachments">
            <a [href]="attachment.path" target="_blank">
                {{ attachment.path.slice(-20) }}
            </a> || 
            <a (click)="removeAttachment(attachment.id)">Remove</a>
        </li>
    </ul>

    <p *ngIf="!currentTask.completed">
        <button (click)="completeTask()">Complete</button>
        <button (click)="addChildTask()">Add child</button>
        <button (click)="addSiblingTask()">Add sibling</button>
        <button (click)="estimateTime()">Estimate time</button>
        <button (click)="template()">Template</button>
        <button (click)="showDeleteModal = true" style="background-color: red; float: right;">Delete task</button>
    </p>
    <p *ngIf="currentTask.completed">
        <button (click)="reactivateTask()">Reactivate</button>
    </p>



    <div class="deleteModal" *ngIf="showDeleteModal">
        <div class="deleteModalContent">
            <p>Are you sure you want to delete the task "{{ currentTask.title }}"?</p>
            <button (click)="deleteTask()" style="background-color: red;">Delete task</button>
            <button (click)="showDeleteModal = false">Cancel</button>
        </div>
    </div>
</div>
